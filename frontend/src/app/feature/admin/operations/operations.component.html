<div class="container mx-auto p-4">
  <div class="max-w-6xl mx-auto">
    <!-- Page Header -->
    <app-page-header
      title="Operations Management"
      subtitle="Manage system operations and their descriptions"
      icon="settings_applications">
    </app-page-header>

    <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
      <!-- Form Card -->
      <mat-card class="overflow-hidden">
        <div class="bg-surface-container-high px-6 py-4 border-b border-outline-variant">
          <h2 class="text-lg font-semibold m-0 flex items-center gap-2">
            <mat-icon class="text-primary">{{ selectedOperation() ? 'edit' : 'add_circle' }}</mat-icon>
            {{ selectedOperation() ? 'Edit Operation' : 'Add New Operation' }}
          </h2>
        </div>
        
        <mat-card-content style="padding: 0;">
          <div class="p-6 pt-8">
            <form [formGroup]="operationForm" (ngSubmit)="saveOperation()" class="space-y-6">
              <mat-form-field appearance="outline" class="w-full">
                <mat-label>Name</mat-label>
                <input matInput formControlName="name" placeholder="Operation name">
                @if (operationForm.get('name')?.hasError('required') && operationForm.get('name')?.touched) {
                  <mat-error>Name is required</mat-error>
                }
              </mat-form-field>
              
              <mat-form-field appearance="outline" class="w-full">
                <mat-label>Description</mat-label>
                <textarea matInput formControlName="description" placeholder="Operation description" rows="3"></textarea>
              </mat-form-field>

              <div class="flex justify-end gap-3 pt-4 border-t border-outline-variant">
                @if (selectedOperation()) {
                  <button mat-stroked-button type="button" (click)="resetForm()">
                    Cancel
                  </button>
                }
                <button mat-flat-button color="primary" type="submit" [disabled]="operationForm.invalid">
                  {{ selectedOperation() ? 'Update' : 'Create' }}
                </button>
              </div>
            </form>
          </div>
        </mat-card-content>
      </mat-card>
      
      <!-- List Card -->
      <mat-card class="overflow-hidden">
        <div class="bg-surface-container-high px-6 py-4 border-b border-outline-variant">
          <h2 class="text-lg font-semibold m-0 flex items-center gap-2">
            <mat-icon class="text-primary">list</mat-icon>
            Operations List
          </h2>
        </div>
        
        <mat-card-content class="p-0">
          @if (operations().length === 0) {
            <app-empty-state
              icon="settings_applications"
              title="No operations found"
              description="There are no operations in the system yet.">
            </app-empty-state>
          } @else {
            <div class="overflow-x-auto">
              <table mat-table [dataSource]="operations()" class="w-full">
                <ng-container matColumnDef="name">
                  <th mat-header-cell *matHeaderCellDef class="font-semibold">Name</th>
                  <td mat-cell *matCellDef="let operation">{{ operation.name }}</td>
                </ng-container>
                
                <ng-container matColumnDef="description">
                  <th mat-header-cell *matHeaderCellDef class="font-semibold">Description</th>
                  <td mat-cell *matCellDef="let operation">{{ operation.description }}</td>
                </ng-container>
                
                <ng-container matColumnDef="actions">
                  <th mat-header-cell *matHeaderCellDef class="font-semibold text-right">Actions</th>
                  <td mat-cell *matCellDef="let operation" class="text-right">
                    <button mat-icon-button color="primary" (click)="selectOperation(operation)" 
                            matTooltip="Edit operation" aria-label="Edit">
                      <mat-icon>edit</mat-icon>
                    </button>
                    <button mat-icon-button color="warn" (click)="deleteOperation(operation)" 
                            matTooltip="Delete operation" aria-label="Delete">
                      <mat-icon>delete</mat-icon>
                    </button>
                  </td>
                </ng-container>
                
                <tr mat-header-row *matHeaderRowDef="displayedColumns" class="bg-surface-container"></tr>
                <tr mat-row *matRowDef="let row; columns: displayedColumns;" 
                    class="hover:bg-surface-container-highest transition-colors"></tr>
              </table>
            </div>
          }
        </mat-card-content>
      </mat-card>
    </div>
  </div>
</div>
