<div class="container mx-auto p-4">
  <div class="max-w-6xl mx-auto">
    <!-- Page Header -->
    <app-page-header
      title="Pages Management"
      subtitle="Manage application pages and their URLs"
      icon="web">
    </app-page-header>

    <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
      <!-- Form Card -->
      <mat-card class="overflow-hidden">
        <div class="bg-surface-container-high px-6 py-4 border-b border-outline-variant">
          <h2 class="text-lg font-semibold m-0 flex items-center gap-2">
            <mat-icon class="text-primary">{{ selectedPage() ? 'edit' : 'add_circle' }}</mat-icon>
            {{ selectedPage() ? 'Edit Page' : 'Add New Page' }}
          </h2>
        </div>
        
        <mat-card-content style="padding: 0;">
          <div class="p-6 pt-8">
            <form [formGroup]="pageForm" (ngSubmit)="savePage()" class="space-y-6">
              <mat-form-field appearance="outline" class="w-full">
                <mat-label>Name</mat-label>
                <input matInput formControlName="name" placeholder="Page name">
                @if (pageForm.get('name')?.hasError('required') && pageForm.get('name')?.touched) {
                  <mat-error>Name is required</mat-error>
                }
              </mat-form-field>
              
              <mat-form-field appearance="outline" class="w-full">
                <mat-label>URL</mat-label>
                <input matInput formControlName="url" placeholder="/path/to/page">
                @if (pageForm.get('url')?.hasError('required') && pageForm.get('url')?.touched) {
                  <mat-error>URL is required</mat-error>
                }
              </mat-form-field>

              <div class="flex justify-end gap-3 pt-4 border-t border-outline-variant">
                @if (selectedPage()) {
                  <button mat-stroked-button type="button" (click)="resetForm()">
                    Cancel
                  </button>
                }
                <button mat-flat-button color="primary" type="submit" [disabled]="pageForm.invalid">
                  {{ selectedPage() ? 'Update' : 'Create' }}
                </button>
              </div>
            </form>
          </div>
        </mat-card-content>
      </mat-card>
      
      <!-- List Card -->
      <mat-card class="overflow-hidden">
        <div class="bg-surface-container-high px-6 py-4 border-b border-outline-variant">
          <h2 class="text-lg font-semibold m-0 flex items-center gap-2">
            <mat-icon class="text-primary">list</mat-icon>
            Pages List
          </h2>
        </div>
        
        <mat-card-content class="p-0">
          @if (pages().length === 0) {
            <app-empty-state
              icon="web"
              title="No pages found"
              description="There are no pages in the system yet.">
            </app-empty-state>
          } @else {
            <div class="overflow-x-auto">
              <table mat-table [dataSource]="pages()" class="w-full">
                <ng-container matColumnDef="name">
                  <th mat-header-cell *matHeaderCellDef class="font-semibold">Name</th>
                  <td mat-cell *matCellDef="let page">{{ page.name }}</td>
                </ng-container>
                
                <ng-container matColumnDef="url">
                  <th mat-header-cell *matHeaderCellDef class="font-semibold">URL</th>
                  <td mat-cell *matCellDef="let page">
                    <code class="text-sm bg-surface-container px-2 py-1 rounded">{{ page.url }}</code>
                  </td>
                </ng-container>
                
                <ng-container matColumnDef="actions">
                  <th mat-header-cell *matHeaderCellDef class="font-semibold text-right">Actions</th>
                  <td mat-cell *matCellDef="let page" class="text-right">
                    <button mat-icon-button color="primary" (click)="selectPage(page)" 
                            matTooltip="Edit page" aria-label="Edit">
                      <mat-icon>edit</mat-icon>
                    </button>
                    <button mat-icon-button color="warn" (click)="deletePage(page)" 
                            matTooltip="Delete page" aria-label="Delete">
                      <mat-icon>delete</mat-icon>
                    </button>
                  </td>
                </ng-container>
                
                <tr mat-header-row *matHeaderRowDef="displayedColumns" class="bg-surface-container"></tr>
                <tr mat-row *matRowDef="let row; columns: displayedColumns;" 
                    class="hover:bg-surface-container-highest transition-colors"></tr>
              </table>
            </div>
          }
        </mat-card-content>
      </mat-card>
    </div>
  </div>
</div>
